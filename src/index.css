@import 'tailwindcss';
@import './styles/receipt-print.css';

@plugin 'tailwindcss-animate';

/* Use a broad-scoped dark variant per Tailwind v4 + shadcn/ui guidance */
@custom-variant dark (&:where(.dark, .dark *));

@theme {
  /* Fonts mapping for Tailwind v4 */
  --font-sans: var(--font-sans);
  --font-mono: var(--font-mono);
  /* Radii mapped to CSS variables */
  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);

  /* Core semantic tokens expected by shadcn/ui (Tailwind v4)
     Use direct var(...) so values can be OKLCH/HSL without wrapper. */
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);

  /* Charts and surface layering */
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
  --color-surface: var(--surface);
  --color-surface-foreground: var(--surface-foreground);

  /* Sidebar-specific tokens */
  --color-sidebar: var(--sidebar-background);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);

  /* Project-specific tokens */
  --color-links: green;
  --color-bg-input: #f3f3f3;
}

/*
  The default border color has changed to `currentColor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  html,
  body,
  #root {
    @apply overflow-x-hidden;
  }
  body {
    @apply overscroll-none;
    font-family: var(--font-sans);
    -webkit-font-smoothing: antialiased;
    text-rendering: optimizeLegibility;
    font-synthesis-weight: none;
    font-optical-sizing: auto;
  }
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentColor);
  }
}

@layer utilities {
  /* Sticky table header helpers */
  .table-sticky thead th {
    position: sticky;
    top: 0;
    z-index: 10;
  }
  /* Slow pulse animation for validation errors */
  @keyframes pulse-slow {
    0%,
    100% {
      opacity: 1;
    }
    50% {
      opacity: 0.7;
    }
  }
  .animate-pulse-slow {
    animation: pulse-slow 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }
  /* Shake animation for login errors (Stripe pattern) - progressive and slower */
  @keyframes shake {
    0% {
      transform: translateX(0);
    }
    10% {
      transform: translateX(-8px);
    }
    20% {
      transform: translateX(8px);
    }
    30% {
      transform: translateX(-6px);
    }
    40% {
      transform: translateX(6px);
    }
    50% {
      transform: translateX(-4px);
    }
    60% {
      transform: translateX(4px);
    }
    70% {
      transform: translateX(-2px);
    }
    80% {
      transform: translateX(2px);
    }
    90% {
      transform: translateX(-1px);
    }
    100% {
      transform: translateX(0);
    }
  }
  .animate-shake {
    animation: shake 0.8s cubic-bezier(0.36, 0.07, 0.19, 0.97);
  }

  /* Animated gradient border for premium features */
  @keyframes gradient-shift {
    0% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
    100% {
      background-position: 0% 50%;
    }
  }

  .premium-border {
    position: relative;
    border-radius: var(--radius);
    padding: 2px;
    background: linear-gradient(
      90deg,
      #6366f1,
      #8b5cf6,
      #d946ef,
      #f43f5e,
      #f97316,
      #eab308,
      #22c55e,
      #14b8a6,
      #3b82f6,
      #6366f1
    );
    background-size: 300% 300%;
    animation: gradient-shift 4s ease infinite;
  }

  .premium-border > * {
    background: var(--card);
    border-radius: calc(var(--radius) - 1px);
  }
  /* Compact theme (scaled) inspired by shadcn */
  .theme-scaled {
    --radius: 0.6rem;
  }

  @media (min-width: 1024px) {
    .theme-scaled {
      --radius: 0.6rem;
    }
  }

  /* Sidebar compaction */
  .theme-scaled [data-sidebar='menu-button'] {
    height: 2rem; /* 32px baseline */
    padding-block: 0.375rem; /* tighter than p-2 */
    padding-inline: 0.5rem;
    line-height: 1.25rem;
    border-radius: var(--radius);
  }
  .theme-scaled [data-sidebar='menu-sub-button'] {
    height: 1.9rem;
    line-height: 1.25rem;
    border-radius: var(--radius);
  }

  /* Card inner spacing compaction */
  .theme-scaled [data-slot='card'] > .p-6 {
    padding: 1rem;
  }
  .theme-scaled [data-slot='card'] {
    border-radius: var(--radius);
  }
  /* Soft page background layer */
  .section-soft {
    @apply bg-linear-to-b from-background to-surface/40 dark:bg-background;
  }

  /* Apply a gentle card tint like shadcn example */
  .cards-tinted [data-slot='card'] {
    @apply bg-linear-to-t from-primary/5 to-card shadow-xs;
  }
  .dark .cards-tinted [data-slot='card'] {
    @apply bg-card;
  }
  /* :root {
  font-family: Inter, system-ui, Avenir, Helvetica, Arial, sans-serif;
  line-height: 1.5;
  font-weight: 400;

  color-scheme: light dark;
  color: rgba(255, 255, 255, 0.87);
  background-color: #242424;

  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

a {
  font-weight: 500;
  color: #646cff;
  text-decoration: inherit;
}
a:hover {
  color: #535bf2;
}

body {
  margin: 0;
  display: flex;
  place-items: center;
  min-width: 320px;
  min-height: 100vh;
}

h1 {
  font-size: 3.2em;
  line-height: 1.1;
}

button {
  border-radius: 8px;
  border: 1px solid transparent;
  padding: 0.6em 1.2em;
  font-size: 1em;
  font-weight: 500;
  font-family: inherit;
  background-color: #1a1a1a;
  cursor: pointer;
  transition: border-color 0.25s;
}
button:hover {
  border-color: #646cff;
}
button:focus,
button:focus-visible {
  outline: 4px auto -webkit-focus-ring-color;
}

@media (prefers-color-scheme: light) {
  :root {
    color: #213547;
    background-color: #ffffff;
  }
  a:hover {
    color: #747bff;
  }
  button {
    background-color: #f9f9f9;
  }
} */

  .flex-row-center {
    @apply flex flex-row items-center;
  }

  .standard-hover {
    transition-property: background-color, border-color, color, fill, stroke;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    transition-duration: 150ms;
  }
  .standard-hover:hover {
    background-color: var(--color-muted);
  }

  /* Status badge utilities */
  .status-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.375rem;
    padding: 0.125rem 0.5rem;
    border-radius: 9999px;
    font-size: 0.75rem; /* text-xs */
    font-weight: 600;
    border-width: 1px;
    border-style: solid;
  }
  .status-success {
    background: var(--color-success-muted);
    color: var(--color-success-foreground);
    border-color: var(--color-success-border);
  }
  .status-warning {
    background: var(--color-warning-muted);
    color: var(--color-warning-foreground);
    border-color: var(--color-warning-border);
  }
  .status-info {
    background: var(--color-info-muted);
    color: var(--color-info-foreground);
    border-color: var(--color-info-border);
  }
  .status-critical {
    background: color-mix(in oklch, var(--destructive) 15%, transparent);
    color: var(--destructive-foreground);
    border-color: color-mix(in oklch, var(--destructive) 30%, transparent);
  }
}

@layer base {
  :root {
    color-scheme: light;
    /* Fonts */
    --font-geist: 'Geist', ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans',
      'Apple Color Emoji', 'Segoe UI Emoji';
    --font-geist-mono: 'Geist Mono', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
    --font-inter: 'Inter', ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans',
      'Apple Color Emoji', 'Segoe UI Emoji';
    --font-sans: var(--font-geist);
    --font-mono: var(--font-geist-mono);
    /* OKLCH neutrals for better contrast & layering */
    --radius: 0.625rem;
    --background: oklch(1 0 0);
    --foreground: oklch(0.145 0 0);
    --card: oklch(1 0 0);
    --card-foreground: oklch(0.145 0 0);
    --popover: oklch(1 0 0);
    --popover-foreground: oklch(0.145 0 0);
    --primary: oklch(0.205 0 0);
    --primary-foreground: oklch(0.985 0 0);
    --secondary: oklch(0.97 0 0);
    --secondary-foreground: oklch(0.205 0 0);
    --muted: oklch(0.97 0 0);
    --muted-foreground: oklch(0.556 0 0);
    --accent: oklch(0.97 0 0);
    --accent-foreground: oklch(0.205 0 0);
    --destructive: oklch(0.577 0.245 27.325);
    --destructive-foreground: oklch(0.985 0 0);
    --border: oklch(0.922 0 0);
    --input: oklch(0.922 0 0);
    --ring: oklch(0.708 0 0);

    /* Surface layer for subtle depth */
    --surface: oklch(0.98 0 0);
    --surface-foreground: var(--foreground);

    /* Sidebar tokens (keep existing names) */
    --sidebar-background: oklch(0.985 0 0);
    --sidebar-foreground: oklch(0.145 0 0);
    --sidebar-primary: oklch(0.205 0 0);
    --sidebar-primary-foreground: oklch(0.985 0 0);
    --sidebar-accent: oklch(0.97 0 0);
    --sidebar-accent-foreground: oklch(0.205 0 0);
    --sidebar-border: oklch(0.922 0 0);
    --sidebar-ring: oklch(0.708 0 0);

    /* Default chart palette; swap via brand theme if desired */
    --chart-1: var(--color-blue-300);
    --chart-2: var(--color-blue-500);
    --chart-3: var(--color-blue-600);
    --chart-4: var(--color-blue-700);
    --chart-5: var(--color-blue-800);
    /* Status tokens (light) - explicit values */
    --success: oklch(0.71 0.14 156); /* approx emerald 600 */
    --success-foreground: color-mix(in oklch, var(--success) 30%, black);
    --success-muted: color-mix(in oklch, var(--success) 12%, white);
    --success-border: color-mix(in oklch, var(--success) 30%, white);
    --warning: oklch(0.78 0.17 80); /* approx amber 600 */
    --warning-foreground: color-mix(in oklch, var(--warning) 35%, black);
    --warning-muted: color-mix(in oklch, var(--warning) 12%, white);
    --warning-border: color-mix(in oklch, var(--warning) 30%, white);
    --info: oklch(0.66 0.14 254); /* approx blue 600 */
    --info-foreground: color-mix(in oklch, var(--info) 35%, black);
    --info-muted: color-mix(in oklch, var(--info) 12%, white);
    --info-border: color-mix(in oklch, var(--info) 30%, white);
  }
  .dark {
    color-scheme: dark;
    --background: oklch(0.145 0 0);
    --foreground: oklch(0.985 0 0);
    --card: oklch(0.205 0 0);
    --card-foreground: oklch(0.985 0 0);
    --popover: oklch(0.269 0 0);
    --popover-foreground: oklch(0.985 0 0);
    --primary: oklch(0.922 0 0);
    --primary-foreground: oklch(0.205 0 0);
    --secondary: oklch(0.269 0 0);
    --secondary-foreground: oklch(0.985 0 0);
    --muted: oklch(0.269 0 0);
    --muted-foreground: oklch(0.708 0 0);
    --accent: oklch(0.371 0 0);
    --accent-foreground: oklch(0.985 0 0);
    --destructive: oklch(0.704 0.191 22.216);
    --destructive-foreground: oklch(0.985 0 0);
    --border: oklch(1 0 0 / 10%);
    --input: oklch(1 0 0 / 15%);
    --ring: oklch(0.556 0 0);

    /* Surface layer for subtle depth */
    --surface: oklch(0.2 0 0);
    --surface-foreground: oklch(0.708 0 0);

    /* Sidebar tokens */
    --sidebar-background: oklch(0.205 0 0);
    --sidebar-foreground: oklch(0.985 0 0);
    --sidebar-primary: oklch(0.488 0.243 264.376);
    --sidebar-primary-foreground: oklch(0.985 0 0);
    --sidebar-accent: oklch(0.269 0 0);
    --sidebar-accent-foreground: oklch(0.985 0 0);
    --sidebar-border: oklch(1 0 0 / 10%);
    --sidebar-ring: oklch(0.439 0 0);

    /* Default chart palette in dark */
    --chart-1: var(--color-blue-300);
    --chart-2: var(--color-blue-500);
    --chart-3: var(--color-blue-600);
    --chart-4: var(--color-blue-700);
    --chart-5: var(--color-blue-800);
    /* Status tokens (dark) - explicit values */
    --success: oklch(0.66 0.12 156);
    --success-foreground: oklch(0.98 0.01 156);
    --success-muted: color-mix(in oklch, var(--success) 22%, black);
    --success-border: color-mix(in oklch, var(--success) 35%, black);
    --warning: oklch(0.73 0.16 80);
    --warning-foreground: oklch(0.98 0.01 80);
    --warning-muted: color-mix(in oklch, var(--warning) 22%, black);
    --warning-border: color-mix(in oklch, var(--warning) 35%, black);
    --info: oklch(0.62 0.13 254);
    --info-foreground: oklch(0.98 0.01 254);
    --info-muted: color-mix(in oklch, var(--info) 22%, black);
    --info-border: color-mix(in oklch, var(--info) 35%, black);
  }
}
