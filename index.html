<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" id="favicon" href="/favicon.ico" type="image/svg+xml" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title id="page-title">Avoqado | Dashboard</title>
    <!-- App init (theme/env) moved to external script for CSP compliance -->
    <script src="/app-init.js"></script>
    <!-- Geist (variable) + Geist Mono for Sidebar; Inter (variable) for content -->
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Geist:wght@100..900&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Geist+Mono:wght@100..900&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet" />
    <script>
      ;(function () {
        // Theme detection
        const storageKey = 'vite-ui-theme'
        const getSystemTheme = () => (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light')
        const setting = localStorage.getItem(storageKey) || 'system'
        const theme = setting === 'system' ? getSystemTheme() : setting
        if (theme === 'dark') document.documentElement.classList.add('dark')

        // Environment detection and favicon/title setting
        const hostname = window.location.hostname
        const pathname = window.location.pathname
        const isLocal =
          hostname === 'localhost' || hostname === '127.0.0.1' || hostname.startsWith('192.168.') || hostname.endsWith('.local')
        const isStaging = hostname.includes('staging') || hostname.includes('develop')
        const isSuperadminRoute = pathname.startsWith('/superadmin')
        const favicon = document.getElementById('favicon')
        const pageTitle = document.getElementById('page-title')
        let baseFaviconHref = '/favicon.ico'

        if (isLocal) {
          baseFaviconHref = '/favicon-development.svg'
          pageTitle.textContent = 'Avoqado | Dashboard (DEV)'
          document.documentElement.setAttribute('data-env', 'development')
        } else if (isStaging) {
          baseFaviconHref = '/favicon-staging.svg'
          pageTitle.textContent = 'Avoqado | Dashboard (STAGING)'
          document.documentElement.setAttribute('data-env', 'staging')
        } else {
          pageTitle.textContent = 'Avoqado | Dashboard'
          document.documentElement.setAttribute('data-env', 'production')
        }

        favicon.href = isSuperadminRoute ? '/favicon-superadmin.svg' : baseFaviconHref
      })()
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
